<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IACAI - Acaiacá</title>

    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'acai-primary': '#2C3E50',
                        'acai-secondary': '#3498DB',
                        'acai-light': '#ECF0F1',
                    }
                }
            }
        }
    </script>

    <!-- Fonte Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }
        .message-user {
            background-color: #ffffff;
            border: 1px solid #e2e8f0;
            border-radius: 18px 18px 0 18px;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }
        .message-ai {
            background-color: #f0f7ff;
            border-radius: 18px 18px 18px 0;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }
        .logo-gradient {
            background: linear-gradient(135deg, #2C3E50 0%, #3498DB 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 3px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body class="h-screen flex items-center justify-center p-4 bg-gray-50">
<div class="bg-white w-full max-w-3xl rounded-xl shadow-xl overflow-hidden flex flex-col border border-gray-200" style="height: 90vh;">
    <!-- Cabeçalho -->
    <div class="bg-gradient-to-r from-acai-primary to-acai-secondary text-white p-4 flex items-center justify-between">
        <div class="flex items-center">
            <div class="w-8 h-8 rounded-full bg-white flex items-center justify-center mr-3">
                <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="w-5 h-5 text-acai-secondary" viewBox="0 0 24 24">
                    <path fill-rule="evenodd" d="M4.804 21.644A6.707 6.707 0 006 21.75a6.721 6.721 0 003.583-1.029c.774.182 1.584.279 2.417.279 5.322 0 9.75-3.97 9.75-9 0-5.03-4.428-9-9.75-9s-9.75 3.97-9.75 9c0 2.409 1.025 4.587 2.674 6.192.232.226.277.428.254.543a3.73 3.73 0 01-.814 1.686.75.75 0 00.44 1.223zM8.25 10.875a1.125 1.125 0 100 2.25 1.125 1.125 0 000-2.25zM10.875 12a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875-1.125a1.125 1.125 0 100 2.25 1.125 1.125 0 000-2.25z" clip-rule="evenodd" />
                </svg>
            </div>
            <div>
                <h1 class="text-lg font-bold">IACAI</h1>
                <p class="text-xs opacity-80">by Acaiacá</p>
            </div>
        </div>
        <div class="text-xs bg-white/20 px-2 py-1 rounded-full">v1.0</div>
    </div>

    <!-- Mensagens -->
    <div class="flex-1 overflow-y-auto p-4 space-y-4" id="chat-messages">
        <div th:if="${messages == null or messages.empty}">
            <div class="flex items-start">
                <div class="p-4 message-ai max-w-[85%]">
                    <p class="font-medium text-acai-primary">Olá! Eu sou a <span class="logo-gradient font-bold">IACAI</span>, assistente virtual da Acaiacá.</p>
                    <p class="mt-1 text-gray-700">Como posso te ajudar hoje?</p>
                </div>
            </div>
        </div>

        <div th:each="message, iter : ${messages}">
            <div th:class="${iter.odd} ? 'flex justify-start' : 'flex justify-end'">
                <div th:class="${iter.odd} ? 'message-ai' : 'message-user'" class="p-4 max-w-[85%]">
                    <p th:text="${message}" class="text-gray-800"></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Input -->
    <div class="border-t p-4 bg-acai-light">
        <form action="/" method="post" class="flex items-center gap-2">
            <input name="message" type="text"
                   class="flex-1 border border-gray-300 rounded-full py-3 px-4 focus:outline-none focus:ring-2 focus:ring-acai-secondary bg-white"
                   placeholder="Digite sua mensagem..." required autocomplete="off">
            <button type="submit" class="bg-acai-secondary hover:bg-acai-primary text-white rounded-full p-3 transition-all duration-200 transform hover:scale-105">
                <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="w-5 h-5" viewBox="0 0 24 24">
                    <path d="M3.478 2.404a.75.75 0 00-.926.941l2.432 7.905H13.5a.75.75 0 010 1.5H4.984l-2.432 7.905a.75.75 0 00.926.94 60.519 60.519 0 0018.445-8.986.75.75 0 000-1.218A60.517 60.517 0 003.478 2.404z" />
                </svg>
            </button>
        </form>
        <p class="text-xs text-gray-500 mt-2 text-center">© 2024 Acaiacá - Todos os direitos reservados</p>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const chatMessages = document.getElementById('chat-messages');
        chatMessages.scrollTop = chatMessages.scrollHeight;

        const input = document.querySelector('input[name="message"]');
        input.focus();

        input.addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                setTimeout(() => input.focus(), 100);
            }
        });
    });
</script>
</body>
</html>
