var n=require("@preact/signals-core"),e=require("react"),r=require("use-sync-external-store/shim/index.js"),t=require("react/jsx-runtime"),i=require("react/jsx-dev-runtime");function u(n){return n&&"object"==typeof n&&"default"in n?n.default:n}var o=/*#__PURE__*/u(e),f=/*#__PURE__*/u(t),c=/*#__PURE__*/u(i),a=!1,s=null,l=!1,v=null,p=new Map;function d(n){if(!n)return 1;var e,r=p.get(n);if(void 0!==r)return r;var t=n.useCallback.toString();if(n.useReducer===n.useEffect)e=1;else if(n.useEffect===n.useImperativeHandle)e=32;else if(/Invalid/.test(t))e=2;else if(/updateCallback/.test(t)||/\[0\]/.test(t)&&/\[1\]/.test(t)){var i=n.useReducer.toString();if(/rerenderReducer/.test(i)||/return\s*\[\w+,/.test(i))e=16;else e=8}else e=4;p.set(n,e);return e}var b=[],g=Symbol.for("react.element"),m=function(){};function h(e){if("function"!=typeof e)return e;else return function(r,t){if("string"==typeof r&&t)for(var i in t){var u=t[i];if("children"!==i&&u instanceof n.Signal)t[i]=u.value}return e.call.apply(e,[e,r,t].concat([].slice.call(arguments,2)))}}var y,x=Symbol.dispose||Symbol.for("Symbol.dispose");function _(n,e){var r=e.effect.S();y=e;return j.bind(e,n,r)}function j(n,e){e();y=n}var S,q,k=((S={u:0,effect:{s:void 0,c:function(){},S:function(){return m},d:function(){}},subscribe:function(){return m},getSnapshot:function(){return 0},S:function(){},f:function(){}})[x]=function(){},S),w=Promise.prototype.then.bind(Promise.resolve());function B(){if(!q)q=w(O)}function O(){var n;q=void 0;null==(n=y)||n.f()}function P(t){if(void 0===t)t=0;B();var i=e.useRef();if(null==i.current)i.current=function(e){var r,t,i,u,o=0,f=n.effect(function(){t=this});t.c=function(){o=o+1|0;if(u)u()};return(r={u:e,effect:t,subscribe:function(n){u=n;return function(){o=o+1|0;u=void 0;f()}},getSnapshot:function(){return o},S:function(){if(null!=y){var n=y.u,e=this.u;if(0==n&&0==e||0==n&&1==e){y.f();i=_(void 0,this)}else if(1==n&&0==e||2==n&&0==e);else i=_(y,this)}else i=_(void 0,this)},f:function(){var n=i;i=void 0;null==n||n()}})[x]=function(){this.f()},r}(t);var u=i.current;r.useSyncExternalStore(u.subscribe,u.getSnapshot,u.getSnapshot);u.S();if(0===t)e.useLayoutEffect(O);return u}Object.defineProperties(n.Signal.prototype,{$$typeof:{configurable:!0,value:g},type:{configurable:!0,value:function(n){var e=n.data,r=P(1);try{return e.value}finally{r.f()}}},props:{configurable:!0,get:function(){return{data:this}}},ref:{configurable:!0,value:null}});exports._useSignalsImplementation=P;exports.ensureFinalCleanup=B;exports.installAutoSignalTracking=function(){if(e.version.split(".").map(Number)[0]>=19)throw new Error("Automatic signals tracking is not supported in React 19 and later, try the Babel plugin instead https://github.com/preactjs/signals/tree/main/packages/react-transform#signals-react-transform.");!function(){a=!0;Object.defineProperty(e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher,"current",{get:function(){return v},set:function(n){if(!l){var e=d(v),r=d(n);v=n;if(function(n,e){if(1&n&&28&e)return!0;else if(2&n||2&e)return!1;else return!1}(e,r)){l=!0;s=P(1);l=!1}else if(function(n,e){return Boolean(28&n&&16&e)}(e,r)){var t;null==(t=s)||t.f();l=!0;s=P(1);l=!1}else if(function(n,e){return Boolean(28&n&&1&e)}(e,r)){var i;null==(i=s)||i.f();s=null}}else v=n}})}();!function(){var n=f,e=c;o.createElement=h(o.createElement);e.jsx&&(e.jsx=h(e.jsx));n.jsx&&(n.jsx=h(n.jsx));e.jsxs&&(e.jsxs=h(e.jsxs));n.jsxs&&(n.jsxs=h(n.jsxs));e.jsxDEV&&(e.jsxDEV=h(e.jsxDEV));n.jsxDEV&&(n.jsxDEV=h(n.jsxDEV))}()};exports.useComputed=function(r){var t=e.useRef(r);t.current=r;return e.useMemo(function(){return n.computed(function(){return t.current()})},b)};exports.useSignal=function(r){return e.useMemo(function(){return n.signal(r)},b)};exports.useSignalEffect=function(r){var t=e.useRef(r);t.current=r;e.useEffect(function(){return n.effect(function(){return t.current()})},b)};exports.useSignals=function(n){if(a)return k;else return P(n)};exports.wrapJsx=h;//# sourceMappingURL=runtime.js.map
